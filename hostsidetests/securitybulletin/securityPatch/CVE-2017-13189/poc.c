/**
 * Copyright (C) 2020 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at:
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
#include <stdlib.h>
#include "ih264_typedefs.h"
#include "ih264d.h"
#include "../includes/common.h"
void * ih264a_aligned_malloc(void *pv_ctxt, WORD32 alignment, WORD32 i4_size) {
    (void) pv_ctxt;
    (void) alignment;
    (void) i4_size;
    return NULL;
}
void ih264a_aligned_free(void *pv_ctxt, void *pv_buf) {
    (void) pv_ctxt;
    free(pv_buf);
    return;
}
int main() {
    WORD32 ret;
    ih264d_create_ip_t s_create_ip;
    ih264d_create_op_t s_create_op;
    s_create_ip.s_ivd_create_ip_t.e_cmd = IVD_CMD_CREATE;
    s_create_ip.s_ivd_create_ip_t.u4_share_disp_buf = 0;
    s_create_ip.s_ivd_create_ip_t.e_output_format = IV_YUV_420P;
    s_create_ip.s_ivd_create_ip_t.pf_aligned_alloc = ih264a_aligned_malloc;
    s_create_ip.s_ivd_create_ip_t.pf_aligned_free = ih264a_aligned_free;
    s_create_ip.s_ivd_create_ip_t.pv_mem_ctxt = NULL;
    s_create_ip.s_ivd_create_ip_t.u4_size = sizeof(ih264d_create_ip_t);
    s_create_op.s_ivd_create_op_t.u4_size = sizeof(ih264d_create_op_t);
    ret = ih264d_api_function(NULL, (void *) &s_create_ip,
                              (void *) &s_create_op);
    if (ret != IV_SUCCESS) {
        return EXIT_SUCCESS;
    }
    if (s_create_op.s_ivd_create_op_t.pv_handle == NULL) {
        return EXIT_VULNERABLE;
    }
    return EXIT_SUCCESS;
}
